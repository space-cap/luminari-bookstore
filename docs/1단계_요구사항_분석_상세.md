# 1단계: 요구사항 분석 (Requirements Analysis) - 상세편

## 목차
1. [요구사항 분석의 목적과 중요성](#1-요구사항-분석의-목적과-중요성)
2. [프로젝트 비전 및 핵심 가치](#2-프로젝트-비전-및-핵심-가치)
3. [이해관계자 분석](#3-이해관계자-분석)
4. [사용자 역할 및 권한 정의](#4-사용자-역할-및-권한-정의)
5. [기능 요구사항 상세 분석](#5-기능-요구사항-상세-분석)
6. [비기능 요구사항 상세 분석](#6-비기능-요구사항-상세-분석)
7. [비즈니스 규칙 정의](#7-비즈니스-규칙-정의)
8. [핵심 엔티티 추출 및 정의](#8-핵심-엔티티-추출-및-정의)
9. [사용자 스토리 및 시나리오](#9-사용자-스토리-및-시나리오)
10. [요구사항 추적 매트릭스](#10-요구사항-추적-매트릭스)

---

## 1. 요구사항 분석의 목적과 중요성

### 1.1 요구사항 분석이란?
요구사항 분석은 소프트웨어 개발 생명주기(SDLC)의 첫 번째 단계로, **"무엇을 만들어야 하는가"**를 명확히 정의하는 과정입니다. 이는 건축에서 설계도를 그리기 전에 고객의 요구사항을 정확히 파악하는 것과 같은 중요한 단계입니다.

### 1.2 요구사항 분석의 중요성
- **방향성 제시**: 프로젝트의 명확한 목표와 범위를 정의
- **의사소통 도구**: 개발팀, 사용자, 이해관계자 간의 공통 이해 확립
- **비용 절감**: 초기에 요구사항을 명확히 하면 후기 변경 비용 대폭 감소
- **품질 보증**: 올바른 제품을 만드는 기반 마련
- **위험 관리**: 잠재적 문제를 조기에 발견하고 대응

### 1.3 본 프로젝트에서의 접근 방식
이 문서는 **상용 수준의 커뮤니티 기반 온라인 서점**을 구축하기 위한 요구사항을 분석하며, 다음과 같은 접근 방식을 취합니다:
- **도메인 주도 설계(DDD)** 원칙 적용
- **사용자 중심 설계(UCD)** 관점 유지
- **확장 가능하고 유지보수 가능한 구조** 고려
- **비즈니스 가치와 기술적 실현 가능성** 균형 유지

---

## 2. 프로젝트 비전 및 핵심 가치

### 2.1 프로젝트 비전
> **"책을 통해 사람들을 연결하고, 지적 즐거움을 공유하는 커뮤니티 기반의 온라인 서점"**

### 2.2 핵심 목표
1. **차별화된 커뮤니티 기능**을 통한 충성도 높은 사용자 기반 확보
2. **도서 판매 및 프리미엄 서비스**를 통한 지속 가능한 수익 모델 창출
3. **독창적인 가치 제공**을 통한 시장에서의 경쟁 우위 확보

### 2.3 차별화 요소
- **커뮤니티 중심**: 단순한 판매 플랫폼이 아닌 독서 커뮤니티
- **게이미피케이션**: 레벨, 업적, 배지 시스템을 통한 참여 유도
- **개인화된 경험**: 나만의 가상 서재 꾸미기 기능
- **소셜 리딩**: 독서 모임을 통한 독서 경험 공유

### 2.4 성공 지표 (KPI)
- 월간 활성 사용자(MAU) 목표: 10,000명
- 사용자 리텐션율: 40% 이상
- 평균 주문 금액(AOV): 30,000원 이상
- 커뮤니티 참여율: 전체 회원의 20% 이상

---

## 3. 이해관계자 분석

### 3.1 이해관계자 식별

| 이해관계자 | 역할 | 관심사항 | 영향력 |
|:---------|:-----|:---------|:------|
| **최종 사용자 (회원)** | 플랫폼의 주 사용자 | 편리한 도서 구매, 커뮤니티 참여, 보상 획득 | 높음 |
| **비회원 방문자** | 잠재 고객 | 도서 정보 조회, 리뷰 읽기 | 중간 |
| **관리자** | 시스템 운영자 | 효율적인 운영 도구, 데이터 분석 | 높음 |
| **출판사/공급사** | 도서 공급자 | 안정적인 판매 채널, 정산 | 중간 |
| **개발팀** | 시스템 구축/유지보수 | 명확한 요구사항, 기술적 실현 가능성 | 높음 |
| **비즈니스 오너** | 서비스 운영 주체 | 수익성, 성장성, 경쟁력 | 최고 |

### 3.2 이해관계자별 요구사항 우선순위

#### 최종 사용자 (회원)
1. **최우선**: 직관적인 UI/UX, 빠른 검색 성능
2. **높음**: 다양한 결제 수단, 안전한 개인정보 보호
3. **중간**: 커뮤니티 기능, 게이미피케이션 요소

#### 관리자
1. **최우선**: 도서/재고 관리 기능, 주문 관리 기능
2. **높음**: 사용자 관리 기능, 통계/분석 대시보드
3. **중간**: 쿠폰/프로모션 관리, 콘텐츠 관리

#### 비즈니스 오너
1. **최우선**: 안정적인 결제 시스템, 수익 창출 기능
2. **높음**: 확장 가능한 아키텍처, 운영 비용 효율성
3. **중간**: 마케팅 도구, 고객 데이터 분석

---

## 4. 사용자 역할 및 권한 정의

### 4.1 역할 정의

#### 4.1.1 비회원 (Guest)
**정의**: 계정 없이 플랫폼을 방문한 사용자

**접근 권한**:
- ✅ 도서 검색 및 조회
- ✅ 도서 상세 정보 확인
- ✅ 리뷰 읽기
- ✅ 베스트셀러/신간 큐레이션 확인
- ❌ 구매 및 결제
- ❌ 리뷰 작성
- ❌ 커뮤니티 참여
- ❌ 장바구니 (세션 기반 임시 장바구니만 가능)

**비즈니스 목적**: 잠재 고객 유입 및 회원 가입 유도

#### 4.1.2 회원 (Member)
**정의**: 플랫폼에 가입하고 로그인한 일반 사용자

**접근 권한**:
- ✅ 비회원의 모든 권한
- ✅ 도서 구매 및 결제
- ✅ 주문 내역 조회
- ✅ 리뷰 작성 및 수정/삭제
- ✅ 리뷰 좋아요
- ✅ 독서 모임 참여
- ✅ 장바구니 이용 (영구 저장)
- ✅ 배송지 관리
- ✅ 쿠폰 및 포인트 사용
- ✅ 프로필 및 서재 꾸미기
- ✅ 보상 시스템 참여 (레벨, 칭호, 배지)
- ❌ 도서 정보 수정
- ❌ 회원 관리
- ❌ 주문 관리 (다른 사용자의)

**비즈니스 목적**: 핵심 수익 창출 및 커뮤니티 활성화

#### 4.1.3 관리자 (Admin)
**정의**: 시스템 운영 및 관리 권한을 가진 사용자

**접근 권한**:
- ✅ 회원의 모든 권한
- ✅ 도서 정보 등록/수정/삭제
- ✅ 재고 관리
- ✅ 전체 회원 관리 (조회, 권한 변경, 계정 정지)
- ✅ 전체 주문 관리 및 상태 변경
- ✅ 쿠폰 생성 및 관리
- ✅ 콘텐츠 관리 (큐레이션, 배너 등)
- ✅ 독서 모임 관리
- ✅ 통계 및 분석 데이터 조회
- ✅ 시스템 설정 관리

**비즈니스 목적**: 효율적인 플랫폼 운영 및 품질 관리

### 4.2 권한 매트릭스

| 기능 영역 | 비회원 | 회원 | 관리자 |
|:---------|:-----:|:----:|:------:|
| **도서 조회** | ✅ | ✅ | ✅ |
| **도서 검색** | ✅ | ✅ | ✅ |
| **도서 구매** | ❌ | ✅ | ✅ |
| **리뷰 읽기** | ✅ | ✅ | ✅ |
| **리뷰 작성** | ❌ | ✅ | ✅ |
| **리뷰 삭제** | ❌ | ✅(본인) | ✅(전체) |
| **장바구니** | 임시 | ✅ | ✅ |
| **주문 조회** | ❌ | ✅(본인) | ✅(전체) |
| **포인트/쿠폰 사용** | ❌ | ✅ | ✅ |
| **독서 모임 참여** | ❌ | ✅ | ✅ |
| **도서 관리** | ❌ | ❌ | ✅ |
| **회원 관리** | ❌ | ❌ | ✅ |
| **주문 상태 변경** | ❌ | ❌ | ✅ |
| **통계 조회** | ❌ | ❌ | ✅ |

---

## 5. 기능 요구사항 상세 분석

### 5.1 회원 및 계정 관리 (Member & Account Management)

#### 5.1.1 회원 가입 (Sign Up)

**요구사항 ID**: FR-MEM-001

**기능 설명**: 
신규 사용자가 플랫폼에 계정을 생성할 수 있는 기능

**상세 요구사항**:
1. **필수 입력 정보**:
   - 이메일 주소 (로그인 ID로 사용)
   - 비밀번호 (8자 이상, 영문/숫자/특수문자 조합)
   - 비밀번호 확인
   - 닉네임 (2~20자, 중복 불가)
   - 이름 (실명)
   - 휴대폰 번호

2. **선택 입력 정보**:
   - 생년월일
   - 성별
   - 관심 장르

3. **검증 규칙**:
   - 이메일 형식 검증 (RFC 5322 표준)
   - 이메일 중복 검증
   - 닉네임 중복 검증
   - 비밀번호 강도 검증
   - 휴대폰 번호 인증 (SMS 인증)

4. **약관 동의**:
   - 필수: 서비스 이용약관, 개인정보 처리방침
   - 선택: 마케팅 정보 수신 동의

5. **소셜 로그인 지원**:
   - 카카오, 네이버, 구글 계정으로 간편 가입
   - 소셜 계정 정보 자동 매핑

**비즈니스 규칙**:
- 회원 가입 시 웰컴 포인트 1,000P 자동 지급
- 초기 레벨은 Lv.1 "독서 입문자"로 설정
- 이메일 인증 완료 후 정식 회원으로 전환

**예외 처리**:
- 이메일 중복: "이미 가입된 이메일입니다" 메시지 표시
- 닉네임 중복: 대체 닉네임 추천 제공
- SMS 인증 실패: 재전송 버튼 제공 (최대 3회)

**UI/UX 요구사항**:
- 단계별 가입 폼 (Progress indicator 표시)
- 실시간 입력 검증 및 피드백
- 모바일 최적화 필수

---

#### 5.1.2 로그인/로그아웃 (Authentication)

**요구사항 ID**: FR-MEM-002

**기능 설명**: 
회원이 계정으로 안전하게 인증하고 시스템에 접근할 수 있는 기능

**상세 요구사항**:
1. **로그인 방식**:
   - 이메일 + 비밀번호
   - 소셜 로그인 (카카오, 네이버, 구글)
   - "로그인 상태 유지" 옵션 제공 (최대 30일)

2. **보안 요구사항**:
   - 비밀번호는 암호화하여 전송 (HTTPS)
   - 비밀번호는 BCrypt 해시로 저장
   - 5회 연속 로그인 실패 시 계정 잠금 (15분)
   - 로그인 이력 기록 (IP, 시간, 기기 정보)

3. **세션 관리**:
   - JWT(JSON Web Token) 기반 인증
   - Access Token 유효기간: 2시간
   - Refresh Token 유효기간: 2주
   - 로그아웃 시 모든 토큰 무효화

4. **비밀번호 재설정**:
   - 이메일로 재설정 링크 전송
   - 링크 유효기간: 1시간
   - 임시 비밀번호 발급 옵션

**비즈니스 규칙**:
- 휴면 계정(1년 미접속) 자동 전환
- 휴면 해제 시 본인 인증 필수

**예외 처리**:
- 계정 잠금 시 관리자 문의 안내
- 이메일 미인증 계정 로그인 시 인증 유도

---

#### 5.1.3 프로필 관리 (Profile Management)

**요구사항 ID**: FR-MEM-003

**기능 설명**: 
회원이 자신의 프로필 정보를 조회하고 수정할 수 있는 기능

**상세 요구사항**:
1. **조회 가능 정보**:
   - 기본 정보: 이메일, 닉네임, 이름, 휴대폰 번호
   - 프로필 정보: 프로필 사진, 자기소개, 관심 장르
   - 활동 통계: 레벨, 경험치, 획득 칭호/배지, 작성 리뷰 수
   - 계정 정보: 가입일, 최근 로그인, 보유 포인트

2. **수정 가능 정보**:
   - 닉네임 (변경 제한: 30일에 1회)
   - 비밀번호 (현재 비밀번호 확인 필수)
   - 휴대폰 번호 (SMS 재인증 필요)
   - 프로필 사진 (최대 5MB, JPG/PNG)
   - 자기소개 (최대 500자)
   - 관심 장르 (다중 선택 가능)

3. **프로필 공개 설정**:
   - 프로필 전체 공개/비공개
   - 활동 내역 공개/비공개
   - 서재 공개/비공개

**비즈니스 규칙**:
- 프로필 사진 미설정 시 기본 아바타 사용
- 부적절한 프로필 사진/자기소개 신고 기능
- 관리자에 의한 강제 변경 가능

---

#### 5.1.4 배송지 관리 (Address Management)

**요구사항 ID**: FR-MEM-004

**기능 설명**: 
회원이 여러 개의 배송지 주소를 등록하고 관리할 수 있는 기능

**상세 요구사항**:
1. **배송지 정보 구성**:
   - 배송지 별칭 (예: "집", "회사", "부모님댁")
   - 수령인 이름
   - 우편번호 및 주소 (도로명/지번)
   - 상세 주소
   - 휴대폰 번호
   - 배송 요청사항 (선택)
   - 기본 배송지 설정

2. **기능**:
   - 배송지 추가 (최대 10개)
   - 배송지 수정
   - 배송지 삭제
   - 기본 배송지 변경
   - 우편번호 검색 (Daum 주소 API 연동)

**비즈니스 규칙**:
- 기본 배송지는 최소 1개 필수
- 주문 시 배송지 선택 또는 새로운 배송지 입력 가능
- 최근 사용한 배송지 우선 표시

---

#### 5.1.5 회원 관리 (Admin) (Member Management)

**요구사항 ID**: FR-MEM-005

**기능 설명**: 
관리자가 전체 회원 목록을 조회하고 관리할 수 있는 기능

**상세 요구사항**:
1. **회원 목록 조회**:
   - 페이징 처리 (기본 20명/페이지)
   - 검색: 이메일, 닉네임, 이름, 휴대폰 번호
   - 필터링: 권한, 가입일, 최근 접속일, 계정 상태
   - 정렬: 가입일, 최근 접속일, 구매 금액

2. **회원 상세 조회**:
   - 기본 정보
   - 주문 내역
   - 리뷰 작성 내역
   - 활동 로그
   - 포인트/쿠폰 내역

3. **회원 관리 기능**:
   - 계정 상태 변경 (정상, 정지, 탈퇴)
   - 권한 변경 (회원, 관리자)
   - 포인트 수동 지급/차감
   - 쿠폰 발급
   - 경고 메시지 발송

**비즈니스 규칙**:
- 계정 정지 시 사유 필수 입력
- 정지된 계정은 로그인 불가
- 회원 탈퇴 시 개인정보는 즉시 삭제, 주문 내역은 5년 보관

---

### 5.2 도서 탐색 및 조회 (Book Discovery & Viewing)

#### 5.2.1 도서 검색 (Book Search)

**요구사항 ID**: FR-BOOK-001

**기능 설명**: 
모든 사용자가 다양한 기준으로 도서를 검색할 수 있는 기능

**상세 요구사항**:
1. **기본 검색**:
   - 통합 검색창: 도서명, 저자, 출판사, ISBN 통합 검색
   - 자동완성 기능 (입력 중 추천 키워드 표시)
   - 최근 검색어 저장 (회원, 최대 10개)
   - 인기 검색어 표시 (실시간 업데이트)

2. **상세 검색**:
   - 도서명 (부분 일치)
   - 저자명 (부분 일치)
   - 출판사 (선택 또는 입력)
   - ISBN (정확히 일치)
   - 카테고리 (다중 선택)
   - 가격 범위 (슬라이더)
   - 출간일 범위

3. **검색 결과**:
   - 페이징 처리 (기본 20건/페이지)
   - 정렬 옵션: 관련도순, 최신순, 가격순(↑↓), 리뷰순, 판매량순
   - 필터: 할인 도서만, 재고 있는 도서만
   - 그리드/리스트 뷰 전환

4. **검색 성능**:
   - 검색 결과 응답 시간: 1초 이내
   - 동의어 처리 (예: "해리포터" ↔ "Harry Potter")
   - 오타 보정 (예: "헤리포터" → "해리포터")

**기술 요구사항**:
- Elasticsearch 또는 Apache Solr 검색 엔진 활용 권장
- 형태소 분석기 적용 (한글: Nori, 영어: Standard)

**비즈니스 규칙**:
- 검색 로그 수집 및 분석 (마케팅 데이터 활용)
- 검색 결과 없을 시 유사 도서 추천

---

#### 5.2.2 카테고리 탐색 (Category Browse)

**요구사항 ID**: FR-BOOK-002

**기능 설명**: 
모든 사용자가 계층적 카테고리 구조를 통해 도서를 탐색할 수 있는 기능

**상세 요구사항**:
1. **카테고리 구조**:
   - 대분류 (예: 소설, 인문, 경제경영, 자기계발, IT/프로그래밍 등)
   - 중분류 (예: 소설 > 한국소설, 외국소설, SF/판타지 등)
   - 소분류 (예: 외국소설 > 영미소설, 일본소설, 프랑스소설 등)
   - 최대 3단계 계층 구조

2. **카테고리 네비게이션**:
   - 메가 메뉴 형태의 카테고리 메뉴
   - Breadcrumb (현재 위치 표시)
   - 상위/하위 카테고리 이동

3. **카테고리 페이지**:
   - 해당 카테고리의 도서 목록
   - 하위 카테고리 바로가기
   - 카테고리별 베스트셀러
   - 카테고리별 신간

**비즈니스 규칙**:
- 하나의 도서는 여러 카테고리에 속할 수 있음 (N:M 관계)
- 카테고리별 추천 도서는 관리자가 수동으로 큐레이션

---

#### 5.2.3 도서 상세 페이지 (Book Detail)

**요구사항 ID**: FR-BOOK-003

**기능 설명**: 
모든 사용자가 도서의 상세 정보를 확인할 수 있는 페이지

**상세 요구사항**:
1. **기본 정보 영역**:
   - 표지 이미지 (고해상도, 확대 가능)
   - 도서명
   - 부제 (있는 경우)
   - 저자(들)
   - 역자 (번역서인 경우)
   - 출판사
   - 출간일
   - ISBN-13, ISBN-10
   - 페이지 수
   - 크기 및 무게
   - 정가 및 판매가
   - 할인율
   - 포인트 적립 정보
   - 재고 상태 (재고 있음, 품절, 절판)

2. **구매 옵션 영역**:
   - 수량 선택 (1~99)
   - 장바구니 담기 버튼
   - 바로 구매 버튼
   - 관심 도서 담기 (찜하기)

3. **상세 정보 탭**:
   - **책 소개**: 출판사 제공 소개글
   - **목차**: 책의 목차
   - **저자 소개**: 저자 약력 및 대표작
   - **출판사 서평**: 출판사 리뷰
   - **책 속으로**: 미리보기 (일부 페이지)

4. **리뷰 영역**:
   - 평균 평점 (별점, 5점 만점)
   - 리뷰 총 개수
   - 리뷰 목록 (페이징)
   - 리뷰 정렬: 최신순, 좋아요순, 평점순
   - 리뷰 작성 버튼 (회원, 구매자만)

5. **추천 도서 영역**:
   - 이 책과 함께 구매한 도서
   - 비슷한 도서
   - 같은 저자의 다른 책

**성능 요구사항**:
- 페이지 로딩 시간: 2초 이내
- 표지 이미지 Lazy Loading 적용

**SEO 요구사항**:
- 메타 태그 최적화 (Open Graph, Twitter Card)
- Schema.org Book 마크업 적용

---

#### 5.2.4 큐레이션 (Curation)

**요구사항 ID**: FR-BOOK-004

**기능 설명**: 
모든 사용자가 관리자 또는 알고리즘이 선정한 추천 도서 목록을 볼 수 있는 기능

**상세 요구사항**:
1. **큐레이션 유형**:
   - **베스트셀러**: 판매량 기준 Top 100
     - 전체, 주간, 월간 단위
     - 카테고리별 베스트셀러
   - **신간**: 최근 30일 이내 출간 도서
   - **MD 추천**: 관리자가 선정한 추천 도서
   - **오늘의 책**: 일일 추천 도서 (매일 자동 변경)
   - **테마별 추천**: 시즌/이벤트별 추천 (예: "겨울에 읽기 좋은 소설")

2. **개인화 추천** (회원):
   - 구매 이력 기반 추천
   - 관심 장르 기반 추천
   - 리뷰 작성 이력 기반 추천
   - 비슷한 회원이 구매한 도서

3. **표시 방식**:
   - 메인 페이지 캐러셀/슬라이더
   - 전용 큐레이션 페이지
   - 캐러셀 자동 재생 (5초 간격)

**기술 요구사항**:
- 개인화 추천 알고리즘: 협업 필터링(Collaborative Filtering) 또는 콘텐츠 기반 필터링
- 추천 결과 캐싱 (성능 최적화)

---

#### 5.2.5 도서 관리 (Admin) (Book Management)

**요구사항 ID**: FR-BOOK-005

**기능 설명**: 
관리자가 도서 정보와 재고를 관리할 수 있는 기능

**상세 요구사항**:
1. **도서 등록**:
   - 수동 입력: 모든 도서 정보 직접 입력
   - ISBN 자동 조회: ISBN 입력 시 외부 API(예: 알라딘 API)에서 정보 자동 가져오기
   - 표지 이미지 업로드 (최대 10MB, JPG/PNG)
   - 카테고리 지정 (다중 선택)
   - 재고 수량 입력

2. **도서 수정**:
   - 모든 도서 정보 수정 가능
   - 수정 이력 기록 (누가, 언제, 무엇을 수정했는지)

3. **도서 삭제**:
   - 논리적 삭제 (Soft Delete): 실제로 삭제하지 않고 비활성화
   - 주문 이력이 있는 도서는 삭제 불가
   - 삭제 시 확인 메시지

4. **재고 관리**:
   - 현재 재고 수량 조회
   - 재고 입고 (수량 추가)
   - 재고 출고 (수량 감소)
   - 재고 이력 조회
   - 재고 부족 알림 (설정 수량 이하 시)

5. **일괄 관리**:
   - 엑셀 업로드를 통한 대량 등록
   - 엑셀 다운로드 (도서 목록 내보내기)

**비즈니스 규칙**:
- 재고가 0인 도서는 "품절" 상태로 자동 표시
- 가격 변경 시 기존 주문에는 영향 없음

---

### 5.3 주문 및 결제 (Order & Payment)

#### 5.3.1 장바구니 (Shopping Cart)

**요구사항 ID**: FR-ORDER-001

**기능 설명**: 
회원이 구매하고자 하는 도서를 장바구니에 담고 관리할 수 있는 기능

**상세 요구사항**:
1. **장바구니 담기**:
   - 도서 상세 페이지에서 "장바구니 담기" 버튼 클릭
   - 수량 선택 (1~99)
   - 동일 도서 중복 추가 시 수량 증가
   - 장바구니 추가 확인 팝업 (계속 쇼핑 or 장바구니 가기)

2. **장바구니 목록**:
   - 담긴 도서 목록 표시 (표지, 제목, 저자, 가격, 수량)
   - 개별 선택 체크박스
   - 전체 선택/해제 버튼

3. **장바구니 관리**:
   - 수량 변경 (+/- 버튼 또는 직접 입력)
   - 개별 삭제
   - 선택 삭제
   - 전체 삭제 (확인 메시지)

4. **가격 정보**:
   - 개별 도서 합계 (가격 × 수량)
   - 총 상품 금액
   - 총 할인 금액
   - 배송비 (30,000원 이상 무료, 미만 시 3,000원)
   - 최종 결제 예정 금액

5. **주문하기**:
   - 선택한 상품만 주문
   - 전체 주문

**비즈니스 규칙**:
- 회원: 장바구니 정보 DB에 영구 저장
- 비회원: 세션 기반 임시 장바구니 (브라우저 종료 시 삭제)
- 재고 부족 시 장바구니 담기 불가
- 장바구니에 담긴 도서가 품절되면 알림 표시

**기술 요구사항**:
- 실시간 재고 확인
- 가격 변동 시 자동 업데이트

---

#### 5.3.2 주문 (Order)

**요구사항 ID**: FR-ORDER-002

**기능 설명**: 
회원이 장바구니의 상품을 주문할 수 있는 기능

**상세 요구사항**:
1. **주문 페이지 구성**:
   - **주문 상품 정보**: 도서 목록, 수량, 가격
   - **주문자 정보**: 이름, 이메일, 휴대폰 번호 (회원 정보 자동 입력)
   - **배송지 정보**:
     - 등록된 배송지 선택
     - 새로운 배송지 입력
     - 주문자 정보와 동일 체크박스
   - **배송 요청사항**: 텍스트 입력 또는 미리 정의된 옵션 선택
   - **할인 적용**:
     - 쿠폰 선택 (보유 쿠폰 목록)
     - 포인트 사용 (보유 포인트 범위 내, 100P 단위)
   - **결제 수단 선택**:
     - 신용카드
     - 계좌이체
     - 간편결제 (카카오페이, 네이버페이, 토스)
   - **결제 금액 요약**:
     - 총 상품 금액
     - 배송비
     - 쿠폰 할인
     - 포인트 사용
     - 최종 결제 금액

2. **주문 검증**:
   - 재고 확인 (주문 시점 기준)
   - 쿠폰 유효성 검증
   - 포인트 잔액 확인
   - 최소 주문 금액 확인 (예: 1,000원 이상)

3. **주문 완료**:
   - 주문번호 생성 (예: ORD20250119123456)
   - 주문 확인 페이지 표시
   - 주문 확인 이메일 발송
   - 장바구니에서 주문 완료된 상품 제거

**비즈니스 규칙**:
- 배송비: 30,000원 이상 무료, 미만 시 3,000원
- 포인트 사용: 최소 1,000P부터, 최대 결제 금액의 50%까지
- 쿠폰은 1개만 적용 가능
- 주문 후 30분 이내 취소 가능

**예외 처리**:
- 재고 부족 시 주문 불가 메시지
- 결제 실패 시 주문 취소 및 재고 복구
- 중복 주문 방지 (버튼 비활성화)

---

#### 5.3.3 결제 (Payment)

**요구사항 ID**: FR-ORDER-003

**기능 설명**: 
회원이 선택한 결제 수단으로 안전하게 결제할 수 있는 기능

**상세 요구사항**:
1. **결제 수단**:
   - **신용카드**: 국내 모든 카드사 지원
   - **계좌이체**: 실시간 계좌이체
   - **간편결제**:
     - 카카오페이
     - 네이버페이
     - 토스페이
   - **무통장입금** (선택적): 입금 대기 상태, 3일 이내 미입금 시 자동 취소

2. **결제 프로세스**:
   - PG사 연동 (예: 토스페이먼츠, 아임포트)
   - 결제 정보 암호화 전송 (SSL/TLS)
   - 결제 승인 대기 (로딩 인디케이터)
   - 결제 결과 수신 및 검증

3. **결제 완료**:
   - 결제 완료 페이지 표시
   - 결제 영수증 제공 (이메일, PDF 다운로드)
   - 주문 상태 "결제 완료"로 변경
   - 재고 차감
   - 포인트 적립 (결제 금액의 1%)
   - 사용한 쿠폰 "사용 완료" 처리
   - 사용한 포인트 차감

4. **결제 실패**:
   - 실패 사유 표시 (한도 초과, 잔액 부족 등)
   - 주문 내역은 "결제 대기" 상태로 유지 (30분)
   - 재결제 시도 가능

**보안 요구사항**:
- PCI-DSS 준수
- 결제 정보는 서버에 저장하지 않음 (PG사 토큰만 저장)
- 모든 결제 통신 HTTPS 강제

**비즈니스 규칙**:
- 결제 완료 후 교환/환불은 별도 프로세스
- 부분 결제 지원 (포인트 + 카드)

---

#### 5.3.4 주문 내역 조회 (Order History)

**요구사항 ID**: FR-ORDER-004

**기능 설명**: 
회원이 자신의 주문 내역을 조회할 수 있는 기능

**상세 요구사항**:
1. **주문 목록**:
   - 최근 주문부터 역순 정렬
   - 페이징 처리 (기본 10건/페이지)
   - 주문번호, 주문날짜, 주문 상태, 총 결제 금액
   - 대표 상품 표지 및 제목 ("외 N권" 표시)

2. **필터링 및 검색**:
   - 기간별: 1개월, 3개월, 6개월, 1년, 전체
   - 주문 상태별: 결제 완료, 배송 준비, 배송 중, 배송 완료, 취소
   - 도서명 검색

3. **주문 상세 조회**:
   - **주문 정보**: 주문번호, 주문날짜, 주문 상태
   - **주문 상품**: 도서 목록, 수량, 가격
   - **결제 정보**: 총 상품 금액, 배송비, 할인, 최종 결제 금액, 결제 수단
   - **배송 정보**: 수령인, 주소, 연락처, 배송 요청사항
   - **배송 추적**: 택배사, 송장번호, 배송 상태
   - **영수증**: 영수증 출력/다운로드

4. **주문 관련 액션**:
   - **배송 조회**: 택배사 사이트 연동
   - **주문 취소**: 결제 완료 ~ 배송 준비 단계에서만 가능
   - **교환/환불 신청**: 배송 완료 후 7일 이내
   - **리뷰 작성**: 배송 완료 후 가능

**비즈니스 규칙**:
- 주문 내역은 5년간 보관
- 주문 취소 시 포인트/쿠폰 자동 복구
- 교환/환불은 관리자 승인 필요

---

#### 5.3.5 주문 관리 (Admin) (Order Management)

**요구사항 ID**: FR-ORDER-005

**기능 설명**: 
관리자가 전체 주문을 조회하고 관리할 수 있는 기능

**상세 요구사항**:
1. **주문 목록 조회**:
   - 전체 주문 목록 (페이징)
   - 검색: 주문번호, 주문자 이름/이메일, 도서명
   - 필터: 주문 상태, 결제 수단, 주문일 범위
   - 정렬: 주문일, 결제 금액

2. **주문 상태 관리**:
   - **결제 완료** → **배송 준비**: 재고 확인 및 포장 지시
   - **배송 준비** → **배송 중**: 택배사 및 송장번호 입력
   - **배송 중** → **배송 완료**: 배송 완료 처리
   - **취소 요청** → **취소 완료**: 결제 취소 및 재고 복구

3. **주문 상세 관리**:
   - 주문 정보 수정 (배송지, 연락처 등)
   - 배송 정보 입력/수정
   - 주문 메모 작성 (내부용)

4. **일괄 처리**:
   - 선택한 주문들 일괄 상태 변경
   - 엑셀 다운로드 (주문 목록 내보내기)
   - 송장 번호 일괄 등록 (엑셀 업로드)

5. **통계 대시보드**:
   - 오늘의 주문 건수/금액
   - 월별 매출 추이
   - 인기 도서 Top 10
   - 주문 상태별 현황

**비즈니스 규칙**:
- 배송 중 상태 변경 시 고객에게 알림 (이메일/SMS)
- 배송 완료 후 3일 뒤 자동으로 "구매 확정"

---

### 5.4 커뮤니티 및 참여 (Community & Engagement)

#### 5.4.1 리뷰 (Review)

**요구사항 ID**: FR-COMMUNITY-001

**기능 설명**: 
회원이 구매한 도서에 대해 리뷰를 작성하고, 다른 사용자의 리뷰를 조회할 수 있는 기능

**상세 요구사항**:
1. **리뷰 작성**:
   - **작성 조건**: 해당 도서를 구매한 회원만 가능
   - **작성 시점**: 배송 완료 이후
   - **작성 횟수**: 1권당 1회 (수정 가능)
   - **필수 입력**:
     - 별점 (1~5점, 0.5점 단위)
     - 리뷰 내용 (최소 20자, 최대 2,000자)
   - **선택 입력**:
     - 사진 첨부 (최대 5장, 각 5MB)

2. **리뷰 조회**:
   - 도서 상세 페이지 내 리뷰 영역
   - 평균 평점 및 별점별 분포 차트
   - 리뷰 목록 (페이징)
   - 정렬: 최신순, 좋아요순, 평점 높은순, 평점 낮은순
   - 필터: 평점별 (5점, 4점, 3점 이하)

3. **리뷰 수정/삭제**:
   - 본인이 작성한 리뷰만 수정/삭제 가능
   - 수정 이력 표시 ("수정됨" 라벨)
   - 삭제 시 확인 메시지

4. **리뷰 신고**:
   - 부적절한 리뷰 신고 기능
   - 신고 사유 선택 (욕설, 광고, 허위 등)
   - 관리자 검토 후 조치

**비즈니스 규칙**:
- 리뷰 작성 시 경험치(RXP) 100 지급
- 사진 포함 리뷰는 추가 RXP 50 지급
- 베스트 리뷰 선정 시 추가 보상
- 신고 누적 시 리뷰 자동 비공개

---

#### 5.4.2 리뷰 좋아요 (Review Like)

**요구사항 ID**: FR-COMMUNITY-002

**기능 설명**: 
회원이 다른 사용자의 리뷰에 "좋아요"를 눌러 유용성을 표현할 수 있는 기능

**상세 요구사항**:
1. **좋아요 기능**:
   - 각 리뷰에 "좋아요" 버튼 표시
   - 클릭 시 좋아요 추가, 재클릭 시 취소
   - 현재 좋아요 수 표시
   - 본인이 좋아요한 리뷰 구분 표시 (버튼 색상 변경)

2. **제약사항**:
   - 회원만 가능 (비회원은 버튼 비활성화)
   - 본인 리뷰에는 좋아요 불가
   - 1인당 리뷰당 1회만 가능

**비즈니스 규칙**:
- 좋아요 많은 리뷰는 상단 노출 ("베스트 리뷰")
- 리뷰 작성자는 좋아요 받을 때마다 RXP 5 획득 (최대 100)

---

#### 5.4.3 독서 모임 (Book Club)

**요구사항 ID**: FR-COMMUNITY-003

**기능 설명**: 
회원이 다양한 테마의 독서 모임에 참여하여 다른 사용자들과 의견을 나눌 수 있는 기능

**상세 요구사항**:
1. **독서 모임 목록**:
   - 진행 중인 모임 목록
   - 모임 정보: 제목, 대상 도서, 주제, 참여 인원, 기간
   - 필터: 카테고리, 진행 상태 (모집 중, 진행 중, 종료)
   - 정렬: 최신순, 인기순 (참여 인원)

2. **독서 모임 상세**:
   - 모임 소개 및 규칙
   - 대상 도서 정보
   - 일정 및 진행 방식
   - 참여 멤버 목록
   - 토론 게시판

3. **독서 모임 참여**:
   - "참여하기" 버튼 클릭
   - 최대 참여 인원 제한 (예: 30명)
   - 참여 후 토론 게시판 접근 가능

4. **독서 모임 생성** (추후 기능):
   - 관리자 또는 일정 레벨 이상 회원만 가능
   - 모임 정보 입력 (제목, 도서, 주제, 기간, 최대 인원)

5. **토론 게시판**:
   - 글 작성/수정/삭제
   - 댓글 작성
   - 좋아요 기능

**비즈니스 규칙**:
- 독서 모임 참여 시 RXP 200 지급
- 모임 기간 동안 주 1회 이상 활동 시 추가 RXP
- 모임 완료 후 "독서 모임 참여" 배지 획득

---

#### 5.4.4 보상 시스템 (Gamification)

**요구사항 ID**: FR-COMMUNITY-004

**기능 설명**: 
회원이 플랫폼 내 다양한 활동을 통해 경험치, 레벨, 칭호, 배지 등을 획득할 수 있는 게이미피케이션 시스템

**상세 요구사항**:
1. **경험치 (RXP - Reading Experience Points)**:
   - 활동별 RXP 지급:
     - 회원 가입: 1,000 RXP
     - 첫 구매: 500 RXP
     - 리뷰 작성: 100 RXP (사진 포함 시 +50)
     - 독서 모임 참여: 200 RXP
     - 매일 로그인: 10 RXP
     - 리뷰 좋아요 받기: 5 RXP (리뷰당 최대 100)
   - 현재 RXP 및 다음 레벨까지 필요 RXP 표시

2. **레벨 시스템**:
   - RXP 누적에 따른 레벨 상승
   - 레벨별 필요 RXP (예시):
     - Lv.1 독서 입문자: 0 RXP
     - Lv.2 책 애호가: 1,000 RXP
     - Lv.3 독서광: 3,000 RXP
     - Lv.4 서재지기: 7,000 RXP
     - Lv.5 책벌레: 15,000 RXP
     - ... (최대 Lv.20)
   - 레벨업 시 축하 팝업 및 보상

3. **칭호 (Title)**:
   - 특정 조건 달성 시 획득
   - 예시:
     - "베스트 리뷰어": 리뷰 10개 이상 작성
     - "사진 작가": 사진 포함 리뷰 5개 이상
     - "토론의 달인": 독서 모임 10회 이상 참여
     - "단골 손님": 월 10권 이상 구매
   - 획득한 칭호 중 1개를 대표 칭호로 설정
   - 프로필 및 리뷰에 표시

4. **배지 (Badge / Achievement)**:
   - 업적 달성 시 획득하는 수집형 보상
   - 카테고리별 분류 (구매, 리뷰, 커뮤니티, 특별)
   - 예시:
     - "첫 발걸음": 첫 구매
     - "소설 마니아": 소설 카테고리 30권 구매
     - "백만 원의 독서": 누적 구매 금액 100만 원
     - "인기 평론가": 리뷰 좋아요 1,000개 획득
   - 배지 컬렉션 페이지

5. **보상 혜택**:
   - 레벨별 혜택:
     - 포인트 적립률 증가 (Lv.1: 1%, Lv.5: 2%, Lv.10: 3%)
     - 특별 쿠폰 지급
     - 베타 기능 우선 접근
   - 칭호/배지별 고유 혜택

**UI/UX 요구사항**:
- 프로필 페이지에 레벨, 칭호, 배지 전시
- 활동 시마다 RXP 획득 피드백 (토스트 메시지)
- 레벨업/칭호 획득 시 애니메이션 효과

---

#### 5.4.5 나만의 서재 (Virtual Bookshelf)

**요구사항 ID**: FR-COMMUNITY-005

**기능 설명**: 
회원이 획득한 보상 아이템을 사용하여 자신의 가상 서재를 꾸밀 수 있는 기능

**상세 요구사항**:
1. **서재 구조**:
   - 3D 또는 2D 일러스트 형태의 가상 공간
   - 책장, 책상, 조명, 소품 등 배치 가능
   - 구매한 도서가 책장에 자동 추가 (표지 표시)

2. **꾸미기 아이템**:
   - 아이템 카테고리: 가구, 소품, 배경, 테마
   - 아이템 획득 방법:
     - 레벨업 보상
     - 칭호/배지 획득 보상
     - 포인트로 구매
     - 특별 이벤트
   - 아이템 인벤토리

3. **서재 편집**:
   - 편집 모드 진입
   - 아이템 배치/이동/삭제
   - 테마 일괄 적용
   - 저장 및 미리보기

4. **서재 공유**:
   - 다른 회원의 서재 방문 및 구경
   - 서재 "좋아요" 기능
   - 인기 서재 랭킹

**비즈니스 규칙**:
- 서재 공개/비공개 설정 가능
- 월별 "이달의 서재" 선정 시 특별 보상

---

### 5.5 프로모션 및 혜택 (Promotion & Benefits)

#### 5.5.1 쿠폰 (Coupon)

**요구사항 ID**: FR-PROMO-001

**기능 설명**: 
회원이 할인 쿠폰을 획득하고 주문 시 사용할 수 있는 기능

**상세 요구사항**:
1. **쿠폰 유형**:
   - **정액 할인**: 특정 금액 할인 (예: 3,000원 할인)
   - **정률 할인**: 특정 비율 할인 (예: 10% 할인)
   - **배송비 무료**: 배송비 무료
   - **카테고리 쿠폰**: 특정 카테고리에만 적용
   - **도서 쿠폰**: 특정 도서에만 적용

2. **쿠폰 속성**:
   - 쿠폰 코드
   - 쿠폰명
   - 할인 금액/비율
   - 최소 주문 금액
   - 최대 할인 금액 (정률 쿠폰)
   - 사용 가능 기간 (시작일, 종료일)
   - 사용 제한 (1인당 1회, 중복 사용 불가 등)

3. **쿠폰 획득**:
   - 관리자 직접 지급
   - 쿠폰 코드 입력 (다운로드)
   - 이벤트 참여 보상
   - 레벨업 보상
   - 생일 쿠폰 자동 지급

4. **쿠폰 사용**:
   - 주문 페이지에서 보유 쿠폰 목록 확인
   - 사용 가능한 쿠폰만 선택 가능
   - 쿠폰 선택 시 할인 금액 실시간 반영
   - 1개 주문에 1개 쿠폰만 적용

5. **쿠폰 함**:
   - 보유 쿠폰 목록
   - 사용 가능/사용 완료/기간 만료 탭 분리
   - 쿠폰 코드 입력 (다운로드) 기능

**비즈니스 규칙**:
- 쿠폰은 주문 시 자동 차감
- 주문 취소 시 쿠폰 복구
- 기간 만료 쿠폰은 자동 삭제

---

#### 5.5.2 포인트 (Point)

**요구사항 ID**: FR-PROMO-002

**기능 설명**: 
회원이 활동 및 구매를 통해 포인트를 적립하고 사용할 수 있는 기능

**상세 요구사항**:
1. **포인트 적립**:
   - 구매 시 적립: 결제 금액의 1% (레벨별 차등)
   - 리뷰 작성: 100P
   - 회원 가입: 1,000P (웰컴 포인트)
   - 생일: 3,000P

2. **포인트 사용**:
   - 주문 시 결제 수단으로 사용
   - 최소 사용: 1,000P
   - 사용 단위: 100P
   - 최대 사용: 결제 금액의 50%

3. **포인트 내역**:
   - 적립/사용 내역 조회
   - 날짜, 구분(적립/사용), 금액, 사유, 잔액
   - 필터: 기간별, 구분별

4. **포인트 유효기간**:
   - 적립일로부터 1년
   - 만료 30일 전 알림
   - 만료 시 자동 소멸

**비즈니스 규칙**:
- 포인트는 현금 환불 불가
- 주문 취소 시 사용한 포인트 복구
- 적립 예정 포인트는 배송 완료 후 7일 뒤 지급

---

#### 5.5.3 쿠폰 관리 (Admin) (Coupon Management)

**요구사항 ID**: FR-PROMO-003

**기능 설명**: 
관리자가 쿠폰을 생성하고 관리할 수 있는 기능

**상세 요구사항**:
1. **쿠폰 생성**:
   - 쿠폰 정보 입력 (유형, 할인율, 조건 등)
   - 쿠폰 코드 생성 (자동 or 수동)
   - 발행 수량 설정

2. **쿠폰 발급**:
   - 전체 회원 일괄 발급
   - 특정 회원 선택 발급
   - 특정 조건 회원 필터링 발급 (예: Lv.5 이상)

3. **쿠폰 목록 조회**:
   - 쿠폰 목록 및 사용 현황
   - 검색: 쿠폰명, 쿠폰 코드
   - 필터: 상태(진행중/종료), 유형

4. **쿠폰 수정/삭제**:
   - 사용되지 않은 쿠폰만 수정/삭제 가능

---

## 6. 비기능 요구사항 상세 분석

### 6.1 성능 (Performance)

#### 6.1.1 응답 시간
- **페이지 로딩**: 모든 페이지는 2초 이내에 로드되어야 함
- **검색 응답**: 검색 결과는 1초 이내에 표시되어야 함
- **API 응답**: 대부분의 API는 500ms 이내, 복잡한 연산도 1초 이내
- **결제 처리**: 결제 승인은 5초 이내

#### 6.1.2 처리량 (Throughput)
- **동시 접속자**: 10,000명 이상 안정적 처리
- **동시 주문**: 초당 100건 이상 처리 가능
- **검색 쿼리**: 초당 500건 이상 처리 가능

#### 6.1.3 리소스 사용
- **데이터베이스 쿼리**: N+1 문제 방지, 적절한 인덱싱
- **이미지 최적화**: WebP 포맷, Lazy Loading, CDN 활용
- **캐싱**: Redis를 활용한 세션, 검색 결과, 큐레이션 캐싱

---

### 6.2 확장성 (Scalability)

#### 6.2.1 수평 확장
- 마이크로서비스 아키텍처 또는 모듈형 모놀리스 설계
- 상태 비저장(Stateless) 서버 구조
- 로드 밸런서를 통한 트래픽 분산

#### 6.2.2 데이터베이스 확장
- 읽기/쓰기 분리 (Read Replica)
- 샤딩 전략 (추후 고려)
- 대용량 데이터 아카이빙 정책

#### 6.2.3 스토리지 확장
- 클라우드 스토리지 (AWS S3, GCP Cloud Storage 등)
- CDN을 통한 정적 파일 배포

---

### 6.3 보안 (Security)

#### 6.3.1 인증 및 인가
- JWT 기반 인증
- Role-Based Access Control (RBAC)
- OAuth 2.0 기반 소셜 로그인

#### 6.3.2 데이터 보호
- 비밀번호 BCrypt 해시 (최소 10 rounds)
- 개인정보 암호화 (AES-256)
- HTTPS 강제 (모든 통신)
- SQL Injection, XSS, CSRF 방어

#### 6.3.3 결제 보안
- PCI-DSS 준수
- PG사를 통한 결제 정보 처리 (서버에 카드 정보 미저장)
- 모든 결제 통신 암호화

#### 6.3.4 개인정보 보호
- GDPR, 개인정보보호법 준수
- 개인정보 수집 최소화
- 회원 탈퇴 시 즉시 삭제 (단, 법적 보관 의무 제외)
- 개인정보 열람/정정/삭제 요구권 보장

---

### 6.4 사용성 (Usability)

#### 6.4.1 UI/UX 원칙
- 직관적이고 일관된 인터페이스
- 접근성 준수 (WCAG 2.1 AA 수준)
- 모바일 우선 설계 (Mobile First)
- 반응형 웹 디자인 (Responsive Design)

#### 6.4.2 사용자 경험
- 로딩 인디케이터 제공
- 에러 메시지 명확하게 제공
- 도움말 및 가이드 제공
- 사용자 피드백 수집 기능

---

### 6.5 안정성 및 가용성 (Reliability & Availability)

#### 6.5.1 가용성
- 목표: 99.9% 가동 시간 (연간 약 8.76시간 다운타임 허용)
- 무중단 배포 (Blue-Green Deployment 또는 Rolling Update)

#### 6.5.2 장애 대응
- 자동 장애 복구 (Health Check, Auto Restart)
- 백업 및 복구 계획 (일일 백업, 주간 전체 백업)
- 재해 복구 계획 (DR - Disaster Recovery)

#### 6.5.3 모니터링
- 실시간 서버 모니터링 (CPU, 메모리, 디스크, 네트워크)
- 애플리케이션 로그 수집 및 분석
- 에러 추적 (Sentry 등)
- 성능 모니터링 (APM - Application Performance Monitoring)

---

### 6.6 유지보수성 (Maintainability)

#### 6.6.1 코드 품질
- 명확한 코딩 컨벤션 및 스타일 가이드
- 코드 리뷰 프로세스
- 단위 테스트 커버리지 80% 이상
- 통합 테스트 및 E2E 테스트

#### 6.6.2 문서화
- API 문서 (Swagger/OpenAPI)
- 데이터베이스 스키마 문서
- 아키텍처 다이어그램
- 운영 매뉴얼

#### 6.6.3 배포 및 운영
- CI/CD 파이프라인 구축
- 환경별 설정 관리 (Dev, Staging, Production)
- 로그 관리 정책

---

### 6.7 호환성 (Compatibility)

#### 6.7.1 브라우저 지원
- Chrome, Firefox, Safari, Edge 최신 2개 버전
- IE 11 지원 제외 (시장 점유율 고려)

#### 6.7.2 모바일 지원
- iOS Safari (iOS 13 이상)
- Android Chrome (Android 8 이상)
- 반응형 웹 또는 모바일 앱 (추후 고려)

#### 6.7.3 해상도 지원
- 모바일: 360px ~ 768px
- 태블릿: 768px ~ 1024px
- 데스크탑: 1024px 이상

---

## 7. 비즈니스 규칙 정의

### 7.1 회원 관련 규칙
1. 이메일 인증을 완료해야 정식 회원으로 활동 가능
2. 휴면 계정: 1년간 미접속 시 자동 전환
3. 계정 정지: 약관 위반 시 관리자 판단으로 정지 가능
4. 회원 탈퇴: 탈퇴 즉시 개인정보 삭제 (법적 보관 의무 제외)

### 7.2 도서 관련 규칙
1. 재고가 0인 도서는 "품절" 상태로 표시, 구매 불가
2. 도서 가격 변경은 기존 주문에 영향 없음
3. 하나의 도서는 여러 카테고리에 속할 수 있음

### 7.3 주문 관련 규칙
1. 배송비: 30,000원 이상 무료, 미만 시 3,000원
2. 주문 후 30분 이내 취소 가능 (자동 취소)
3. 결제 완료 ~ 배송 준비 단계에서만 회원이 직접 취소 가능
4. 배송 중 이후는 고객센터 문의 필요
5. 배송 완료 후 7일 이내 교환/환불 신청 가능
6. 주문 취소 시 사용한 쿠폰/포인트 자동 복구

### 7.4 결제 관련 규칙
1. 최소 주문 금액: 1,000원
2. 포인트 사용: 최소 1,000P부터, 결제 금액의 50%까지
3. 쿠폰은 1개만 적용 가능
4. 결제 완료 후 포인트 적립: 배송 완료 7일 후

### 7.5 리뷰 관련 규칙
1. 구매한 도서에 대해서만 리뷰 작성 가능
2. 배송 완료 후 작성 가능
3. 1권당 1회 작성 (수정 가능)
4. 리뷰 작성 시 RXP 100 지급, 사진 포함 시 +50
5. 부적절한 리뷰 신고 누적 시 관리자 검토 후 삭제

### 7.6 포인트 관련 규칙
1. 포인트 유효기간: 적립일로부터 1년
2. 만료 30일 전 이메일 알림
3. 포인트는 현금 환불 불가
4. 레벨에 따른 적립률 차등 (Lv.1: 1%, Lv.5: 2%, Lv.10: 3%)

### 7.7 쿠폰 관련 규칙
1. 1개 주문에 1개 쿠폰만 적용
2. 쿠폰 중복 사용 불가
3. 최소 주문 금액 조건 충족 시 사용 가능
4. 쿠폰 기간 만료 시 자동 삭제

### 7.8 레벨 및 보상 규칙
1. RXP 획득 시 실시간 반영
2. 레벨업 시 축하 팝업 및 보상 지급
3. 칭호는 중복 획득 불가, 조건 충족 시 자동 부여
4. 배지는 수집형, 획득 후 영구 보유

---

## 8. 핵심 엔티티 추출 및 정의

### 8.1 엔티티 추출 프로세스
요구사항 분석을 통해 시스템에 필요한 핵심 **명사(Noun)**들을 추출하고, 이를 데이터 모델의 기본 단위인 **엔티티(Entity)**로 정의합니다.

### 8.2 도메인별 엔티티 목록

#### 8.2.1 회원 도메인 (Member Domain)

| 엔티티 | 설명 | 주요 속성 |
|:------|:-----|:----------|
| **Member** | 회원 | member_id, email, password, nickname, name, phone, profile_image, bio, level, rxp, join_date, last_login, status |
| **Address** | 배송지 주소 | address_id, member_id(FK), alias, recipient, postal_code, address, detail_address, phone, is_default |
| **Authority** | 권한 | authority_id, member_id(FK), role (MEMBER, ADMIN) |

**핵심 개념**:
- **Member**: 시스템의 중심 사용자 엔티티
- **Address**: 1명의 회원은 여러 개의 배송지를 가질 수 있음 (1:N)
- **Authority**: 회원의 권한을 관리 (1:N, 향후 복잡한 권한 체계 확장 가능)

---

#### 8.2.2 상품(책) 도메인 (Book Domain)

| 엔티티 | 설명 | 주요 속성 |
|:------|:-----|:----------|
| **Book** | 책 | book_id, isbn, title, subtitle, author_id(FK), publisher_id(FK), publish_date, pages, price, discount_rate, description, table_of_contents, cover_image, stock, status |
| **Author** | 저자 | author_id, name, bio, photo |
| **Publisher** | 출판사 | publisher_id, name, description, website |
| **Category** | 카테고리 | category_id, name, parent_category_id(FK, self-join), depth, order |
| **Book_Category** | 책-카테고리 연결 | book_category_id, book_id(FK), category_id(FK) |

**핵심 개념**:
- **Book**: 시스템의 핵심 상품 엔티티
- **Author, Publisher**: 정규화를 위해 별도 테이블로 분리
- **Category**: 계층 구조 (Self-Referencing), 최대 3단계
- **Book_Category**: Book과 Category의 다대다(N:M) 관계를 해소하는 연결 테이블

---

#### 8.2.3 주문 도메인 (Order Domain)

| 엔티티 | 설명 | 주요 속성 |
|:------|:-----|:----------|
| **Order** | 주문 | order_id, order_number, member_id(FK), order_date, status, total_price, discount_price, final_price, recipient, address, phone, delivery_request |
| **OrderItem** | 주문 항목 | order_item_id, order_id(FK), book_id(FK), quantity, price, discount_rate |
| **Payment** | 결제 | payment_id, order_id(FK), payment_method, payment_date, amount, pg_transaction_id, status |
| **Shipment** | 배송 | shipment_id, order_id(FK), courier, tracking_number, shipped_date, delivered_date, status |

**핵심 개념**:
- **Order**: 주문 마스터 정보
- **OrderItem**: 1개의 주문에 여러 도서가 포함 (1:N)
- **Payment**: 결제 정보 (1:1)
- **Shipment**: 배송 정보 (1:1)

---

#### 8.2.4 장바구니 도메인 (Cart Domain)

| 엔티티 | 설명 | 주요 속성 |
|:------|:-----|:----------|
| **Cart** | 장바구니 | cart_id, member_id(FK), created_date, updated_date |
| **CartItem** | 장바구니 항목 | cart_item_id, cart_id(FK), book_id(FK), quantity, added_date |

**핵심 개념**:
- **Cart**: 회원별 장바구니 (1:1)
- **CartItem**: 장바구니에 담긴 도서들 (1:N)

---

#### 8.2.5 프로모션 도메인 (Promotion Domain)

| 엔티티 | 설명 | 주요 속성 |
|:------|:-----|:----------|
| **Coupon** | 쿠폰 | coupon_id, code, name, type (FIXED, PERCENT, FREE_SHIPPING), discount_value, min_order_amount, max_discount_amount, start_date, end_date, total_quantity |
| **UserCoupon** | 사용자 보유 쿠폰 | user_coupon_id, member_id(FK), coupon_id(FK), issued_date, used_date, status |
| **PointHistory** | 포인트 내역 | point_history_id, member_id(FK), type (EARN, USE, EXPIRE), amount, reason, created_date, balance |

**핵심 개념**:
- **Coupon**: 쿠폰 마스터 정보
- **UserCoupon**: 회원이 보유한 쿠폰 (N:M 관계 해소)
- **PointHistory**: 포인트 적립/사용 이력 (트랜잭션 로그)

---

#### 8.2.6 커뮤니티/참여 도메인 (Community Domain)

| 엔티티 | 설명 | 주요 속성 |
|:------|:-----|:----------|
| **Review** | 리뷰 | review_id, member_id(FK), book_id(FK), rating, content, photos, created_date, updated_date, like_count |
| **ReviewLike** | 리뷰 좋아요 | review_like_id, review_id(FK), member_id(FK), created_date |
| **BookClub** | 독서 모임 | club_id, title, book_id(FK), description, start_date, end_date, max_members, status |
| **ClubMember** | 모임 멤버 | club_member_id, club_id(FK), member_id(FK), joined_date, role |
| **Achievement** | 업적/배지 | achievement_id, type (BADGE, TITLE), name, description, condition, icon, reward_rxp |
| **UserAchievement** | 사용자 획득 업적 | user_achievement_id, member_id(FK), achievement_id(FK), acquired_date |
| **Bookshelf** | 가상 서재 | bookshelf_id, member_id(FK), theme, is_public |
| **BookshelfItem** | 서재 아이템 | item_id, bookshelf_id(FK), item_type, position_x, position_y, created_date |

**핵심 개념**:
- **Review**: 도서 리뷰
- **ReviewLike**: 리뷰 좋아요 (N:M 관계 해소)
- **BookClub**: 독서 모임 마스터
- **ClubMember**: 모임 참여 회원 (N:M 관계 해소)
- **Achievement**: 업적/칭호/배지 마스터
- **UserAchievement**: 회원이 획득한 업적 (N:M 관계 해소)
- **Bookshelf**: 회원의 가상 서재
- **BookshelfItem**: 서재에 배치된 아이템들

---

### 8.3 엔티티 관계 요약

#### 핵심 관계
1. **Member ↔ Order**: 1:N (한 회원이 여러 주문)
2. **Order ↔ OrderItem**: 1:N (한 주문에 여러 도서)
3. **Order ↔ Payment**: 1:1
4. **Order ↔ Shipment**: 1:1
5. **Member ↔ Cart**: 1:1
6. **Cart ↔ CartItem**: 1:N
7. **Book ↔ Category**: N:M (연결 테이블: Book_Category)
8. **Book ↔ Review**: 1:N
9. **Member ↔ Review**: 1:N
10. **Review ↔ ReviewLike**: 1:N
11. **Member ↔ BookClub**: N:M (연결 테이블: ClubMember)
12. **Member ↔ Achievement**: N:M (연결 테이블: UserAchievement)
13. **Member ↔ Coupon**: N:M (연결 테이블: UserCoupon)

---

## 9. 사용자 스토리 및 시나리오

사용자 스토리는 **"누가, 무엇을, 왜 원하는가"**를 간결하게 표현하는 방식으로, 요구사항을 사용자 관점에서 이해하는 데 도움을 줍니다.

### 9.1 사용자 스토리 형식
```
As a [역할],
I want to [행동],
So that [목적/가치].
```

### 9.2 주요 사용자 스토리

#### 9.2.1 회원 가입
```
As a 비회원,
I want to 이메일과 비밀번호로 회원가입할 수 있다,
So that 도서를 구매하고 커뮤니티에 참여할 수 있다.
```

**수용 기준 (Acceptance Criteria)**:
- [ ] 이메일 형식이 유효해야 함
- [ ] 비밀번호는 8자 이상, 영문/숫자/특수문자 조합이어야 함
- [ ] 닉네임은 중복될 수 없음
- [ ] 이용약관 및 개인정보처리방침 동의 필수
- [ ] 회원가입 완료 시 웰컴 포인트 1,000P 지급

---

#### 9.2.2 도서 검색
```
As a 방문자 (비회원/회원),
I want to 도서명, 저자, 출판사로 책을 검색할 수 있다,
So that 원하는 책을 빠르게 찾을 수 있다.
```

**수용 기준**:
- [ ] 통합 검색창에서 입력 즉시 자동완성 표시
- [ ] 검색 결과는 1초 이내에 표시
- [ ] 검색 결과는 관련도순, 최신순, 가격순으로 정렬 가능
- [ ] 검색 결과 없을 시 유사 도서 추천

---

#### 9.2.3 장바구니 담기
```
As a 회원,
I want to 마음에 드는 책을 장바구니에 담을 수 있다,
So that 나중에 한 번에 구매할 수 있다.
```

**수용 기준**:
- [ ] 도서 상세 페이지에서 "장바구니 담기" 버튼 클릭
- [ ] 수량 선택 가능 (1~99)
- [ ] 동일 도서 중복 추가 시 수량 증가
- [ ] 재고 부족 시 장바구니 담기 불가

---

#### 9.2.4 주문 및 결제
```
As a 회원,
I want to 장바구니의 상품을 주문하고 결제할 수 있다,
So that 원하는 책을 구매할 수 있다.
```

**수용 기준**:
- [ ] 배송지 선택 또는 새로 입력 가능
- [ ] 쿠폰 및 포인트 사용 가능
- [ ] 다양한 결제 수단 선택 가능 (카드, 계좌이체, 간편결제)
- [ ] 결제 완료 후 주문 확인 이메일 발송
- [ ] 재고 차감 및 포인트 적립

---

#### 9.2.5 리뷰 작성
```
As a 회원,
I want to 내가 구매한 책에 대해 리뷰를 작성할 수 있다,
So that 다른 사람들과 독서 경험을 공유하고 보상을 받을 수 있다.
```

**수용 기준**:
- [ ] 구매한 도서만 리뷰 작성 가능
- [ ] 배송 완료 후 작성 가능
- [ ] 별점(1~5)과 리뷰 내용(최소 20자) 필수
- [ ] 사진 첨부 선택 가능 (최대 5장)
- [ ] 리뷰 작성 시 RXP 100 지급 (사진 포함 시 +50)

---

#### 9.2.6 독서 모임 참여
```
As a 회원,
I want to 관심 있는 독서 모임에 참여할 수 있다,
So that 다른 독서 애호가들과 책에 대해 토론하고 보상을 받을 수 있다.
```

**수용 기준**:
- [ ] 진행 중인 독서 모임 목록 조회 가능
- [ ] "참여하기" 버튼 클릭으로 가입
- [ ] 최대 참여 인원 제한 확인
- [ ] 참여 후 토론 게시판 접근 가능
- [ ] 참여 시 RXP 200 지급

---

### 9.3 사용 시나리오 (Use Case Scenario)

#### 시나리오 1: 신규 회원의 첫 구매

**액터**: 신규 방문자 → 회원

**선행 조건**: 없음

**플로우**:
1. 사용자가 사이트 첫 방문
2. 메인 페이지에서 베스트셀러 배너 확인
3. 관심 도서 클릭하여 상세 페이지 진입
4. 도서 정보 및 리뷰 읽기
5. "장바구니 담기" 클릭 시 로그인 유도
6. "회원가입" 버튼 클릭
7. 이메일, 비밀번호, 닉네임 입력 후 가입 완료
8. 웰컴 포인트 1,000P 지급 확인
9. 다시 도서 상세 페이지로 돌아가 장바구니 담기
10. 장바구니 페이지 이동
11. "주문하기" 버튼 클릭
12. 배송지 입력, 쿠폰 선택(없음), 포인트 사용 안 함
13. 결제 수단 선택 (카카오페이)
14. 결제 완료
15. 주문 확인 페이지 표시
16. 주문 확인 이메일 수신

**후행 조건**:
- 주문 상태: "결제 완료"
- 재고 차감
- 포인트 적립 예정 (배송 완료 7일 후)

---

#### 시나리오 2: 기존 회원의 리뷰 작성 및 레벨업

**액터**: 회원 (Lv.2, RXP 2,900)

**선행 조건**: 회원이 이전에 도서를 구매하고 배송 완료됨

**플로우**:
1. 로그인 후 "나의 주문 내역" 페이지 이동
2. 배송 완료된 주문 확인
3. "리뷰 작성" 버튼 클릭
4. 별점 5점 선택
5. 리뷰 내용 작성 (100자)
6. 책 사진 2장 첨부
7. "리뷰 등록" 버튼 클릭
8. 리뷰 작성 완료 메시지 표시
9. RXP 150 획득 (기본 100 + 사진 50)
10. RXP 총 3,050, 레벨 3으로 레벨업!
11. 레벨업 축하 팝업 표시
12. 칭호 "책 애호가" 획득
13. 보상: 10% 할인 쿠폰 지급

**후행 조건**:
- 리뷰 도서 상세 페이지에 표시
- 레벨: Lv.3
- RXP: 3,050
- 포인트 적립률: 1% → 1.5%

---

## 10. 요구사항 추적 매트릭스

요구사항 추적 매트릭스(RTM - Requirements Traceability Matrix)는 각 요구사항이 어떤 엔티티, 사용자 스토리, 우선순위와 연결되는지 추적하는 표입니다.

| 요구사항 ID | 요구사항 | 관련 엔티티 | 우선순위 | 사용자 스토리 | 상태 |
|:-----------|:--------|:----------|:--------|:-------------|:-----|
| FR-MEM-001 | 회원 가입 | Member, Authority | 최고 | US-001 | 분석 완료 |
| FR-MEM-002 | 로그인/로그아웃 | Member | 최고 | US-002 | 분석 완료 |
| FR-MEM-003 | 프로필 관리 | Member | 높음 | US-003 | 분석 완료 |
| FR-MEM-004 | 배송지 관리 | Address | 높음 | US-004 | 분석 완료 |
| FR-MEM-005 | 회원 관리(Admin) | Member | 높음 | US-005 | 분석 완료 |
| FR-BOOK-001 | 도서 검색 | Book, Author, Publisher | 최고 | US-006 | 분석 완료 |
| FR-BOOK-002 | 카테고리 탐색 | Category, Book_Category | 높음 | US-007 | 분석 완료 |
| FR-BOOK-003 | 도서 상세 페이지 | Book, Review | 최고 | US-008 | 분석 완료 |
| FR-BOOK-004 | 큐레이션 | Book | 중간 | US-009 | 분석 완료 |
| FR-BOOK-005 | 도서 관리(Admin) | Book, Author, Publisher, Category | 높음 | US-010 | 분석 완료 |
| FR-ORDER-001 | 장바구니 | Cart, CartItem | 최고 | US-011 | 분석 완료 |
| FR-ORDER-002 | 주문 | Order, OrderItem | 최고 | US-012 | 분석 완료 |
| FR-ORDER-003 | 결제 | Payment | 최고 | US-013 | 분석 완료 |
| FR-ORDER-004 | 주문 내역 조회 | Order, OrderItem, Shipment | 높음 | US-014 | 분석 완료 |
| FR-ORDER-005 | 주문 관리(Admin) | Order, OrderItem, Shipment | 높음 | US-015 | 분석 완료 |
| FR-COMMUNITY-001 | 리뷰 | Review | 최고 | US-016 | 분석 완료 |
| FR-COMMUNITY-002 | 리뷰 좋아요 | ReviewLike | 중간 | US-017 | 분석 완료 |
| FR-COMMUNITY-003 | 독서 모임 | BookClub, ClubMember | 중간 | US-018 | 분석 완료 |
| FR-COMMUNITY-004 | 보상 시스템 | Member (RXP, Level), Achievement, UserAchievement | 높음 | US-019 | 분석 완료 |
| FR-COMMUNITY-005 | 나만의 서재 | Bookshelf, BookshelfItem | 낮음 | US-020 | 분석 완료 |
| FR-PROMO-001 | 쿠폰 | Coupon, UserCoupon | 높음 | US-021 | 분석 완료 |
| FR-PROMO-002 | 포인트 | PointHistory | 높음 | US-022 | 분석 완료 |
| FR-PROMO-003 | 쿠폰 관리(Admin) | Coupon, UserCoupon | 중간 | US-023 | 분석 완료 |

**우선순위 정의**:
- **최고**: MVP(Minimum Viable Product)에 반드시 포함되어야 하는 핵심 기능
- **높음**: 상용 서비스 출시 전 필수 기능
- **중간**: 출시 후 단계적 추가 가능
- **낮음**: 향후 확장 기능

---

## 11. 다음 단계 안내

1단계 요구사항 분석이 완료되었습니다. 이제 다음 단계로 진행할 수 있습니다:

### **2단계: 개념적 데이터 모델링**
- 엔티티 간의 관계(Relationship) 상세 정의
- 엔티티별 속성(Attribute) 상세 정의
- ERD(Entity-Relationship Diagram) 초안 작성
- 비즈니스 규칙을 ERD에 반영

### **3단계: 논리적 데이터 모델링**
- 개념적 모델을 관계형 데이터베이스 테이블 구조로 변환
- 정규화(Normalization) 수행 (최소 3NF)
- 기본 키(PK) 및 외래 키(FK) 정의
- 다대다(N:M) 관계를 연결 테이블로 해소
- 논리적 ERD 완성

### **4단계: 물리적 데이터 모델링**
- 데이터 타입 및 제약 조건 정의
- 인덱스 설계
- 파티셔닝 전략 (필요 시)
- DDL(Data Definition Language) 작성
- 실제 데이터베이스 생성

---

## 12. 결론

이 문서는 **상용 수준의 온라인 서점 프로젝트**를 위한 **1단계 요구사항 분석**을 상세히 다루었습니다. 주요 내용은 다음과 같습니다:

1. **프로젝트 비전 및 목표**: 커뮤니티 기반 온라인 서점의 차별화 요소 정의
2. **이해관계자 분석**: 다양한 이해관계자의 요구사항 파악
3. **사용자 역할 정의**: 비회원, 회원, 관리자의 권한 체계 수립
4. **기능 요구사항 상세 분석**: 회원 관리, 도서 탐색, 주문/결제, 커뮤니티 등 23개 주요 기능 상세 분석
5. **비기능 요구사항**: 성능, 보안, 확장성 등 품질 속성 정의
6. **비즈니스 규칙**: 시스템 운영을 위한 핵심 규칙 정의
7. **핵심 엔티티 추출**: 30개 이상의 엔티티 식별 및 정의
8. **사용자 스토리 및 시나리오**: 실제 사용 상황을 반영한 시나리오 작성
9. **요구사항 추적 매트릭스**: 요구사항의 체계적 관리 기반 마련

이 분석 결과를 바탕으로, 다음 단계인 **개념적 데이터 모델링**을 진행하면 확장 가능하고 유지보수 가능한 데이터베이스 구조를 설계할 수 있습니다.

---

**작성 정보**:
- **문서명**: 1단계: 요구사항 분석 (상세편)
- **프로젝트**: Luminari Bookstore
- **작성일**: 2025-11-19
- **버전**: 1.0
- **다음 단계**: 2단계 - 개념적 데이터 모델링
